# Sicurezza dei sistemi Web

## Definizione del contesto

### Il Web - funzionalita' e vulnerabilita'
L'idea alla base del Web e' quella di archiviare **pagine di ipertesto** su computer collegati tra loro tramite Internet (dunque indipendentemente dalla loro posizione fisica) e permettendone l'accesso da qualunque computer in Internet specificandone soltanto il nome simbolico detto **URL - Uniform Resource Locator**.

Per specificare le problematiche di sicurezza dei sistemi Web vediamo gli attori coinvolti nelle applicazioni Web:
* **Browser** (client): colui che richiede le pagine web;
* **Web Server**: il fornitore dei servizi e delle risorse;
* **Base di dati** (DBMS);
* **Internet** (come mezzo di trasporto).

Le tecnologie e le applicazioni su cui si basano le applicazioni Web sono:
* **Il protocollo HTTP** e la suite dei protocolli **TCP/IP**:
  * La comunicazione avviene tramite lo scambio di messaggi secondo il paradigma richiesta-risposta (**HTTP request-response**);
* Il concetto di **ipertesto** e quindi sul linguaggio **HTML**;
* Linguaggi di **scripting** (PHP, Js, Perl, ecc).

#### URL - Uniform Resource Locator
L'URL e' il meccanismo che viene utilizzato per identificare univocamente le risorse del Web, in particolare ogni pagina Web viene identificata specificandone il "contenitore" cioe':
* Il nome del computer che la contiene;
* Il nome del file all'interno di tale computer;
* Il protocollo usato per lo scambio della pagina.

Esempio:
| Protocollo 	| Computer           	| File       	|
|------------	|--------------------	|------------	|
| http://    	| www.repubblica.it/ 	| index.html 	|

#### Tipi di siti Web
Esistono 2 tipologie di siti Web:
* **Siti statici**:
  * Presentano contenuti recuperati da una pagina Web statica;
  * Solitamente aggiornati con una bassa frequenza e sono mantenuti da una o piu' persone che agiscono direttamente sul codice della pagina (tramite appositi editor Web).
* **Siti dinamici**:
  * Presentano contenuti **redatti dinamicamente** (per esempio grazie al collegamento con un database) e forniscono contenuti che possono variare in base a piu' fattori.

#### Problemi di sicurezza nel Web
Per rendere un'applicazione Web sicura bisogna garantire:
* Sicurezza del browser (lato client);
* Sicurezza del Web server;
* Sicurezza dei protocolli di comunicazinoe tra browser e server;
* Sicurezza dell'interazione con il DBMS;
* Sicurezza del Web dinamico:
  * Uso sicuro dei linguaggi di scripting.

___
### Internet in a nutshell

#### Modello ISO/OSI
Il modello **ISO/OSI** stabilisce per l'architettura logica di rete una struttura a strati, composta da una **pila di protocolli** di comunicazione suddivisa in 7 livelli (dal livello fisico al livello delle applicazioni).

Ogni livello utilizza i servizi offerti dal livello precedente aggiungendo delle funzionalita' e offrendo servizi al livello superiore.

| Level | ISO/OSI layer | Description |
|-------|---------------|------------------------------------------------------------------------------------------------------|
| 7 | Application | Applicazione che usa la rete (Web, email, ecc) |
| 6 | Presentation | Interpreta i dati |
| 5 | Session | Organizza le sequenze di dati |
| 4 | Transport | Assicura comunicazione affidabile tra due hosts numerando i pacchetti e rispedendo i pacchetti persi |
| 3 | Network | Instrada i pacchetti tra canali diversi, facendoli arrivare al destinatario |
| 2 | Data Link | Raggruppa i bits in pacchetti e controlla chi riceve i pacchetti lungo un singolo canale condiviso |
| 1 | Physical | Consegna un bit lungo un singolo canale |

* Ogni livello del nodo A comunica con i rispettivo livello del nodo B;
* Per fargli arrivare i dati li passa al livello sottostante, aggiungendo un'**intestazinoe** al pacchetto;
* Quando il nodo B riceve i dati, si tolgono le intestazioni fino a quando non si arriva al livello di competenza.

| A NODE | ISO/OSI layer | B NODE |
|-------------|-----------------------------|--------|
| ^ |  | ^ |
| Application | <- Application protocol -> | 7 |
| Application | <- Presentation protocol -> | 6 |
| Session | <- Session protocol-> | 5 |
| Transport | <- Transport protocol-> | 4 |
| Network | <- Network protocol-> | 3 |
| Data Link | <- Data Link protocol-> | 2 |
| Physical | <- Physical protocol -> | 1 |
| ---------- | Network | ----- |

A livello implementativo lo standard di fatto affermatosi per l'architettura di rete a livelli e' lo stack **TCP/IP** che riprende in parte il modello ISO/OSI in quanto i livelli Session e Presentation non sono presenti.
Il nome TCP/IP deriva dal fatto che i due livelli piu' importanti sono:
* **TCP - Transmission Control Protocol**;
* **IP - Internet Protocol**.

#### TCP/IP - formato dei dati
Due nodi comunicano per livelli e per far arrivare i dati, questi vengono passati al livello sottostante aggiungendo un'intestazione al pacchetto.

Nello stack TCP/IP, a seconda del livello, il pacchetto viene identificato con un nome diverso e andando verso il livello fisico gli **header si concatenano**.

| ISO/OSI layer | Packet name |
|-------------------------------|-------------|
| Application protocol | Message |
| Transport protocol (TCP, UDP) | Segment |
| Network protocol (IP) | Packet |
| Data Link protocol | Frame |

#### TCP/IP - sicurezza
Si puo' gestire la sicurezza a diversi livelli all'interno dello stack TCP/IP:
* A livello applicazione;
* A livello trasporto;
* A livello rete.

#### IETF e RFC
L'**Internet Engineering Task Force** e' un gruppo di lavoro aperto che lavorano tramite mailing list (si riuniscono al massimo 3 volte l'anno) che ha come obiettivo quello di stabilire gli standard di Internet.

Producono documenti chiamati **Requests for Comments** che vengono sottoposti all'**IESG - Internet Engineering Steering Group** per il loro avanzamento a standard ufficiale.

Il motto dell'IETF e' _rough consensus and running code_ (consenso diffuso e codice funzionante).


___
## Il protocollo HTTP